DROP TABLE RECIBE;
DROP TABLE ASIGNATURA;
DROP TABLE PROFESOR;
DROP TABLE ALUMNO;


CREATE TABLE ALUMNO (
NUMMATRICULA NUMBER(4),
NOMBRE VARCHAR2(20),
FECHANACIMIENTO DATE,
TELEFONO VARCHAR2(10),
CONSTRAINT ALUMNO_PK PRIMARY KEY (NUMMATRICULA)
);

CREATE TABLE PROFESOR (
ID_PROFESOR NUMBER(3),
NIF_P VARCHAR2(9),
NOMBRE VARCHAR2(20),
ESPECIALIDAD VARCHAR2(10),
TELEFONO VARCHAR2(10),
CONSTRAINT PROFESOR_PK PRIMARY KEY (ID_PROFESOR),
CONSTRAINT PROFESOR_UQ1 UNIQUE (NIF_P)
);

CREATE TABLE ASIGNATURA (
CODASIGNATURA VARCHAR2(10),
NOMBRE VARCHAR2(20),
ID_PROFESOR NUMBER (3),
CONSTRAINT ASIGNATURA_PK PRIMARY KEY (CODASIGNATURA),
CONSTRAINT ASIGNATURA_FK1 FOREIGN KEY (ID_PROFESOR) REFERENCES PROFESOR(ID_PROFESOR)
);

CREATE TABLE RECIBE (
NUMMATRICULA NUMBER(4),
CODASIGNATURA VARCHAR2(10),
CURSOESCOLAR VARCHAR2(10),
CONSTRAINT RECIBE_PK PRIMARY KEY (NUMMATRICULA, CODASIGNATURA, CURSOESCOLAR),
CONSTRAINT RECIBE_FK1 FOREIGN KEY (NUMMATRICULA) REFERENCES ALUMNO(NUMMATRICULA),
CONSTRAINT RECIBE_FK2 FOREIGN KEY (CODASIGNATURA) REFERENCES ASIGNATURA(CODASIGNATURA)
);


INSERT INTO PROFESOR VALUES(03, '45879623B', 'PEPE', 'LENGUA', '632145789');
INSERT INTO PROFESOR VALUES(02, '49679253S', 'LAURA', 'FISICA', '789400215');

INSERT INTO ASIGNATURA VALUES ('FIS1', 'FISICA QUIMICA', 02);
INSERT INTO ASIGNATURA VALUES ('QUIM1', 'QUIMICA', 02);
INSERT INTO ASIGNATURA VALUES ('LENG3', 'LENGUAJE', 03);
INSERT INTO ASIGNATURA VALUES ('LIT3', 'LITERATURA', 03);

INSERT INTO ALUMNO VALUES (100, 'JOAQUIN', '11-11-1990', '600322145');
INSERT INTO ALUMNO VALUES (101, 'LAURA', '11-12-1990', '600412149');
INSERT INTO ALUMNO VALUES (102, 'SANDRA', '10-11-1991', '699320345');
INSERT INTO ALUMNO VALUES (103, 'CRISTINA', '10-12-1991', '770363145');
INSERT INTO ALUMNO VALUES (104, 'FLAVIO', '11-11-1992', '608822005');
INSERT INTO ALUMNO VALUES (105, 'JAVIER', '12-10-1991', '600660049');
INSERT INTO ALUMNO VALUES (106, 'RAFA', '10-11-1992', '601322874');
INSERT INTO ALUMNO VALUES (107, 'FRAN', '11-11-1989', '777322011');
INSERT INTO ALUMNO VALUES (108, 'ADELA', '11-10-1990', '655422145');
INSERT INTO ALUMNO VALUES (109, 'JOSEVI', '12-12-1989', '609874145');

INSERT INTO RECIBE VALUES (100, 'FIS1', 02);
INSERT INTO RECIBE VALUES (100, 'QUIM1', 02);
INSERT INTO RECIBE VALUES (101, 'LIT3', 03);
INSERT INTO RECIBE VALUES (101, 'QUIM1', 02);
INSERT INTO RECIBE VALUES (102, 'LENG3', 03);
INSERT INTO RECIBE VALUES (102, 'LIT3', 03);
INSERT INTO RECIBE VALUES (103, 'FIS1', 02);
INSERT INTO RECIBE VALUES (103, 'QUIM1', 02);
INSERT INTO RECIBE VALUES (104, 'QUIM1', 02);
INSERT INTO RECIBE VALUES (104, 'LIT3', 03);
INSERT INTO RECIBE VALUES (105, 'LENG3', 03);
INSERT INTO RECIBE VALUES (105, 'LIT3', 03);
INSERT INTO RECIBE VALUES (106, 'FIS1', 02);
INSERT INTO RECIBE VALUES (106, 'QUIM1', 02);
INSERT INTO RECIBE VALUES (107, 'QUIM1', 02);
INSERT INTO RECIBE VALUES (107, 'LENG3', 03);
INSERT INTO RECIBE VALUES (108, 'FIS1', 02);
INSERT INTO RECIBE VALUES (108, 'LIT3', 03);
INSERT INTO RECIBE VALUES (109, 'FIS1', 02);
INSERT INTO RECIBE VALUES (109, 'QUIM1', 02);

/*B*/
INSERT INTO PROFESOR VALUES(01, '28652415B', 'JUAN', 'BIOLOGIA', '600101589');
INSERT INTO PROFESOR VALUES(04, '28652415B', 'CLARA', 'FILOSOFIA', '700901579');

/*C*/
INSERT INTO ALUMNO VALUES (110, 'JOSEBA', '06-06-1990', '685100247');
INSERT INTO ALUMNO VALUES (110, 'PEDRO', '06-06-1993', '623140253');

/*D*/
INSERT INTO ALUMNO VALUES (111, 'JUANJO', '07-07-1990', NULL);
INSERT INTO ALUMNO VALUES (112, 'JAVIER CAMPOS', '07-07-1992', NULL);
INSERT INTO ALUMNO VALUES (113, 'JAVIER LIRA', '08-08-1991', NULL);

/*E*/
UPDATE ALUMNO SET TELEFONO ='600123456' WHERE NUMMATRICULA = 111;
UPDATE ALUMNO SET TELEFONO ='678963147' WHERE NUMMATRICULA = 112;
UPDATE ALUMNO SET TELEFONO ='777622104' WHERE NUMMATRICULA = 113;

/*F*/
/*NO FUNCIONA*/
UPDATE ALUMNO SET FECHANACIMIENTO = TO_DATE(TO_CHAR(FECHANACIMIENTO, 'YYYY' = '2000')); 

/*G*/
UPDATE PROFESOR SET ESPECIALIDAD = 'INFORMATICA' WHERE TELEFONO IS NOT NULL AND NIF_P NOT LIKE '9%';

/*H*/
UPDATE PROFESOR SET ESPECIALIDAD = 'BIOLOGIA' WHERE ID_PROFESOR =1;
UPDATE PROFESOR SET ESPECIALIDAD = 'QUIMICA' WHERE ID_PROFESOR =2;
UPDATE PROFESOR SET ESPECIALIDAD = 'FISICA' WHERE ID_PROFESOR =3;

/*I*/
DELETE FROM RECIBE WHERE CODASIGNATURA = 'FIS1';

/*J*/
DELETE FROM ASIGNATURA WHERE CODASIGNATURA = 'FIS1';

/*K*/
DELETE FROM ASIGNATURA;

/*L*/
DELETE FROM PROFESOR;

/*M*/
DELETE FROM ALUMNO;
